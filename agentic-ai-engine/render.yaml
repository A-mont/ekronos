services:
  - type: web
    name: agentic-ai-engine
    runtime: python
    region: oregon
    plan: starter

    buildCommand: |
      pip install --upgrade pip
      pip install -r requirements.txt

    startCommand: >
      gunicorn app.main:app
      --worker-class uvicorn.workers.UvicornWorker
      --workers 2
      --bind 0.0.0.0:$PORT
      --timeout 120

    envVars:
      - key: ENV
        value: prod

      - key: LOG_LEVEL
        value: INFO

      - key: CORS_ORIGINS
        value: https://ixchel-hub.vercel.app/

      - key: CORS_ALLOW_CREDENTIALS
        value: "false"

      - key: ENABLE_HSTS
        value: "true"

      - key: API_KEY
        sync: false
